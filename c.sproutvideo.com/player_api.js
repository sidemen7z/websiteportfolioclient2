//2024-06-13 11:42
var SV=SV||{};SV.players||(SV.players={}),SV.Player||(SV.Player=function(options){function _sendMessage(message){_iframe.contentWindow.postMessage(message,window.location.protocol+"//videos.sproutvideo.com")}var _videoId=options.videoId,_playlistId=options.playlistId,_volume=1,_duration=0,_currentTime=0,_loaded=0,_email=null,_playbackRate=1,_listeners={};if(void 0!==options.target)try{-1<options.target.src.indexOf(_videoId)&&(_iframe=options.target)}catch(e){var _iframe=null}else _iframe=function(id,type){for(var players=document.querySelectorAll("iframe."+("video"==type?"sproutvideo-player":"sproutvideo-playlist")),i=0;i<players.length;i++)if(-1<players[i].src.indexOf(id))return players[i]}(_videoId||_playlistId,_videoId?"video":"playlist");if(_iframe)return options={events:options.events,play:function(index){_sendMessage(void 0!==index?'{"name":"playVideo", "data":"'+index+'"}':'{"name":"play"}')},pause:function(){_sendMessage('{"name":"pause"}')},setVolume:function(vol){_sendMessage('{"name":"volume", "data":"'+vol+'"}')},getVolume:function(){return _volume},setPlaybackRate:function(rate){_sendMessage('{"name":"playbackRate", "data":"'+rate+'"}')},getPlaybackRate:function(){return _playbackRate},seek:function(loc){_sendMessage('{"name":"seek", "data":"'+loc+'"}')},toggleHD:function(){_sendMessage('{"name":"toggleHD"}')},getCurrentTime:function(){return _currentTime},getPercentLoaded:function(){return _loaded},getDuration:function(){return _duration},getEmail:function(){return _email},frameForward:function(){_sendMessage('{"name":"frameForward"}')},frameBack:function(){_sendMessage('{"name":"frameBack"}')},getPaused:function(){_sendMessage('{"name":"getPaused"}')},getConsent:function(){_sendMessage('{"name":"getConset"}')},updateStatus:function(message){switch(message.type){case"volume":_volume=message.data;break;case"progress":_currentTime=message.data.time;break;case"loading":_loaded=message.data;break;case"ready":_duration=message.data.duration,_email=message.data.email;break;case"rateChange":_playbackRate=message.data}},bind:function(type,listener){void 0===_listeners[type]&&(_listeners[type]=[]),_listeners[type].push(listener)},fire:function(event){if((event="string"==typeof event?{type:event}:event).target||(event.target=this),_listeners[event.type]instanceof Array)for(var listeners=_listeners[event.type],i=0,len=listeners.length;i<len;i++)listeners[i].call(this,event)==this.unbind&&this.unbind(event.type,listeners[i])},unbind:function(type,listener){if(_listeners[type]instanceof Array)for(var listeners=_listeners[type],i=0,len=listeners.length;i<len;i++)if(listeners[i]===listener){listeners.splice(i,1);break}}},SV.players[_videoId||_playlistId]=options;throw"Can not find video iframe"}),SV.routePlayerEvent||(SV.routePlayerEvent=function(e){if("videos.sproutvideo.com"==e.origin.split("//")[1])try{var message=JSON.parse(e.data),player=("ready"==message.type&&e.source.postMessage(JSON.stringify({name:"setURL",data:window.location.href}),e.origin),SV.players[message.id]);player.updateStatus(message),player.fire({type:message.type,data:message.data}),player&&player.events&&player.events.onStatus&&player.events.onStatus(message)}catch(e){}}),window.addEventListener?window.addEventListener("message",SV.routePlayerEvent,!1):window.attachEvent("onmessage",SV.routePlayerEvent);
